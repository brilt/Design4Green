<!doctype html><html manifest="demo.appcache">
<html lang="fr">

<head>
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <meta charset="utf-8">
  <title>Map</title>
  <meta name="description" content="Site for Design4Green 2022 Challenge">
  <meta name="keywords" content="HTML, CSS, JavaScript">
  <meta name="author" content="team 42">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>    
<script src="js/highmaps.js"></script>



<div id="container" style="height: 600px; min-width: 50%; max-width: 80px; margin: 10px auto 0 auto;"></div>
   
<script type="text/javascript">	
$(function () {
	var processed_json = new Array();
	
	$.getJSON('json/liste.json', function(data) {
        for (i = 0; i < data.length; i++){
            processed_json.push([data[i].city,data[i].formation]);
        }
		 
		$.getJSON('json/departement.geojson', function (geojson) {
		
			Highcharts.mapChart('container', {
				title: {
					text: '',
				},
				style: {
					fontSize: '14px',
				},
				chart: {    
					map: geojson,					
					plotBackgroundColor: '#FFFFFF'
				},
				mapNavigation: {
					enabled: true,
					buttonOptions: {
						verticalAlign: 'bottom'
					},
					enableDoubleClickZoomTo: true
				},
		
				series: [{
					showInLegend: false,             
					animation: false,
					data: processed_json,
					keys: ['nom', 'nombre'],
					joinBy: 'nom',
					name: 'Lieux',
					borderColor: '#000000',
					nullColor: '#EFEFEF',
					states: {
						hover: {
							color: '#AAAAAA'
						},
					},
					 tooltip: {
						pointFormat: '{point.nom}: {point.nombre} formation',
					},
					dataLabels: {
						enabled: true,
						format: '{point.nom}'
					},
					point:{
                	events:{
                    click: function(){
                        alert(this.nom);
						return(this.nom);
                    	}
              		  }
					},
				}]
			});
		});
	});
});

   
</script>
  
</html>